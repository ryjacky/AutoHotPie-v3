<section class="layout" style="height: 100%">
  <div class="growL"
       style=" background: var(--accordion-header-disabled-text-color); border-radius: 1em; padding: 0.5em 1em;">
    <label
      style="margin: 0; color: var(--button-ghost-basic-text-color);">{{"PAGES.EDITOR.PREVIEW" | translate}}</label>
    <app-pie-buttons [editorMode]="true" (activePieItemId)="activePieItemId = $event" [pieMenuId]="pieMenuId"></app-pie-buttons>
  </div>

  <div class="growM">
    <button
      nbButton
      size="small"
      status="success"
      style="position: absolute; align-self: flex-end;"
      (click)="save()">
      {{ 'PAGES.EDITOR.SAVE' | translate }}
    </button>
    <nb-tabset [style.width.%]="100">
      <nb-tab tabTitle="Actions" style="margin-top: 1em;">
        <div style="height: 80vh; padding-right: 5px; display: flex; flex-direction: column; align-items: center;">

          <div *ngFor="let pieTaskContexts of pieMenuState.getPieTaskContext(this.activePieItemId ?? -1); let i = index"
               style="display: flex; flex-direction: column; flex-wrap: nowrap; align-content: flex-start; justify-content: flex-start; align-items: center; ">
            <div style="display: flex">
              <app-action-card [pieTaskContext]="pieTaskContexts" style="height: fit-content"></app-action-card>
              <div style="display: flex; flex-direction: column; margin-left: 0.5em;">
                <button
                  (click)="moveUp(i)"
                  *ngIf="i !== 0" nbButton fullWidth ghost size="tiny" style="margin-bottom: 2px;">
                  <nb-icon icon="arrow-upward-outline"/>
                </button>
                <button
                  (click)="moveDown(i)"
                  *ngIf="i !== pieMenuState.getPieItemActions(this.activePieItemId ?? -1).length - 1" nbButton fullWidth ghost size="tiny"
                  style="margin-bottom: 2px;">
                  <nb-icon icon="arrow-downward-outline"/>
                </button>
                <button nbButton ghost size="tiny" (click)="deleteAction(i)">
                  <nb-icon icon="trash-2-outline"></nb-icon>
                </button>
              </div>
            </div>

            <nb-icon style="min-height: 32px" icon="arrow-downward-outline"></nb-icon>
          </div>
          <button nbButton ghost style="height: 64px; width: 64px; border: solid;margin-bottom: 3em;"
                  (click)="addAction()">
            <nb-icon icon="plus-outline" style="min-width: 32px; height: 32px"></nb-icon>
          </button>
        </div>
      </nb-tab>

      <nb-tab tabTitle="Settings" style="width: 100%">
        <app-settings-tab/>

      </nb-tab>
    </nb-tabset>

  </div>


</section>
